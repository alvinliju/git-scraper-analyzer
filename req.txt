git-health checker
-----

scrape all the github repo's and give us the data about how the repo is performing is that repo dying or not thats it.

how to do it:
- scrape github 5k req/hr 
- when you get a github repo take it -> 
                    save it as an object with -> 
                            reponame:{link:github-link, likes, maintainers, last-commit-date, number-of-commits}
- save all those info in .json file.
- build a function to determine health of a repo with info we have 



async scrape -> use 3 github tokens and rotate it 
throw it in sql lite -> take it in -> analyze -> transoform -> store to postgress
build a simple api 

dlt duplicates by name " docker exec -it pgdb psql -U postgres -d postgres -c "DELETE FROM repos WHERE id NOT IN(SELECT MIN(id) FROM repos GROUP BY name)" "



curl -X POST http://localhost:3000/query \
  -H "Content-Type: application/json" \
  -d '{"question": "What are the top 5 repos by stars?"}'


   docker exec -it pgdb psql -U postgres -c "
SELECT
    status,
    COUNT(*) as count,
    MAX(updated_at) as last_updated
FROM repo_queue
GROUP BY status;
"

##reset stale repos
docker exec -it pgdb psql -U postgres -c "
UPDATE repo_queue 
SET status = 'pending', updated_at = CURRENT_TIMESTAMP
WHERE status = 'in_progress';
"